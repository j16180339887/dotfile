#!/bin/sh

while true; do
  sleep 20s                                                                 
  if ! ping -c 1 8.8.8.8 | grep -q -i "ttl"; then
    systemctl restart NetworkManager.service
    systemctl restart networking.service
    systemctl restart teamviewerd.service
    echo $(date +"%m/%d/%Y %I:%M:%p") >> /home/Reconnect.log
  fi

  if ! systemctl is-active teamviewerd.service >/dev/null 2>&1; then
    systemctl restart teamviewerd.service
    echo $(date +"%m/%d/%Y %I:%M:%p") "teamviewer" >> /home/Reconnect.log
  fi
done
